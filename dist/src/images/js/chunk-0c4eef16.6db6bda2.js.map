{"version":3,"sources":["webpack:///./src/components/management/authorization.vue?a29d","webpack:///./src/components/management/authorization.vue","webpack:///./src/components/management/authorization.vue?fa2c"],"names":["class","style","roles","r","key","id","role","changeRole","name","description","color","size","menus","option","menuOption","multiple","choose-mode","ref","users","userOption","save","getData","data","datas","keyName","titleName","dataMode","parentName","getTotalDatas","callback","Management","then","resp","ok","body","mounted","this","init","methods","$refs","menu","expandAll","getRoles","length","$store","state","menuKeys","utils","saveLocal","dispatch","success","computed","__exports__","render"],"mappings":"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","file":"src/images/js/chunk-0c4eef16.6db6bda2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./authorization.vue?vue&type=style&index=0&id=dc87214c&lang=less\"","<style lang=\"less\">\n.authorization-vue {\n  .authorization-frame {\n    display: flex;\n    height: 68vh;\n    border: @border;\n    margin-bottom: 20px;\n    > div {\n      padding: 20px 15px;\n      border-right: @border;\n      flex: 1;\n      overflow: auto;\n      &:last-of-type {\n        border-right: none;\n      }\n      .h-tree-show-desc {\n        font-size: 14px;\n      }\n    }\n    .role-container {\n      padding: 0;\n      .role-item {\n        padding: 5px 10px;\n        border-bottom: @border;\n        &.selected,\n        &:hover {\n          background: @gray4-color;\n          cursor: pointer;\n        }\n        .title {\n          font-size: 16px;\n          font-weight: bold;\n          color: @dark-color;\n        }\n        .desc {\n          color: @dark2-color;\n        }\n      }\n    }\n  }\n}\n</style>\n<template>\n  <div class=\"authorization-vue frame-page h-panel\">\n    <div class=\"h-panel-bar\">\n      <span class=\"h-panel-title\">权限管理</span>\n      <span class=\"dark2-color\">保存示例是存储在Local Storage中，可通过清空 Local Storage 属性 SYS_CONFIG_MENU 重置菜单</span>\n    </div>\n    <div class=\"h-panel-body\">\n      <div class=\"authorization-frame\">\n        <div class=\"role-container\">\n          <div v-for=\"r of roles\" :key=\"r.id\" class=\"role-item\" :class=\"{ selected: role == r }\" @click=\"changeRole(r)\">\n            <p class=\"title\">{{ r.name }}</p>\n            <p class=\"desc\">{{ r.description }}</p>\n          </div>\n        </div>\n        <div class=\"menu-container\">\n          <div style=\"margin-bottom: 10px\">\n            <Button\n              color=\"primary\"\n              size=\"s\"\n              @click=\"\n                $refs.menu.chooseAll();\n                $refs.menu.expandAll();\n              \"\n              >全选</Button\n            >\n            <Button size=\"s\" @click=\"menus = []\">清空</Button>\n          </div>\n          <Tree :option=\"menuOption\" multiple choose-mode=\"some\" v-model=\"menus\" ref=\"menu\"></Tree>\n        </div>\n        <div class=\"users-container\">\n          <div style=\"margin-bottom: 10px\">\n            <Button\n              color=\"primary\"\n              size=\"s\"\n              @click=\"\n                $refs.user.chooseAll();\n                $refs.user.expandAll();\n              \"\n              >全选</Button\n            >\n            <Button size=\"s\" @click=\"users = []\">清空</Button>\n          </div>\n          <Tree :option=\"userOption\" multiple ref=\"user\" v-model=\"users\"></Tree>\n        </div>\n      </div>\n      <div class=\"text-center\">\n        <Button color=\"primary\" @click=\"save\">保存</Button>\n        <Button @click=\"getData\">重置</Button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { fullMenus } from '@js/config/menu-config';\nimport Request from '@common/request';\nimport utils from '@common/utils';\nimport { message } from 'heyui';\n\nexport default {\n  data() {\n    return {\n      role: null,\n      roles: [],\n      menuOption: {\n        datas: fullMenus\n      },\n      userOption: {\n        keyName: 'id',\n        titleName: 'name',\n        dataMode: 'list',\n        parentName: 'parent',\n        getTotalDatas(callback) {\n          Request.Management.users().then(resp => {\n            if (resp.ok) {\n              callback(resp.body);\n            }\n          });\n        }\n      },\n      menus: [],\n      users: []\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      this.$refs.menu.expandAll();\n      this.getRoles();\n    },\n    changeRole(r) {\n      this.role = r;\n      this.getData(r);\n    },\n    getRoles() {\n      Request.Management.roles().then(resp => {\n        if (resp.ok) {\n          this.roles = resp.body;\n          if (this.roles.length) {\n            this.role = this.roles[0];\n            this.getData();\n          }\n        }\n      });\n    },\n    getData() {\n      this.menus = this.$store.state.menuKeys;\n    },\n    save() {\n      // 如果使用权限配置，配合后端获取请求的数据\n      // Request.Account.saveRoleConfig({roleId: this.role.id, menus: this.menus, roles: this.roles}).then(resp => {\n      //   if (resp.ok) {\n      //      this.$store.dispatch('updateMenuKeys', this.menus);\n      //      message.success('保存成功');\n      //   }\n      // });\n      utils.saveLocal('SYS_CONFIG_MENU', this.menus);\n      this.$store.dispatch('updateMenuKeys', this.menus);\n      message.success('保存成功');\n    }\n  },\n  computed: {}\n};\n</script>\n","import { render } from \"./authorization.vue?vue&type=template&id=dc87214c\"\nimport script from \"./authorization.vue?vue&type=script&lang=js\"\nexport * from \"./authorization.vue?vue&type=script&lang=js\"\n\nimport \"./authorization.vue?vue&type=style&index=0&id=dc87214c&lang=less\"\n\nimport exportComponent from \"/Users/vvpvvp/Documents/develop-me/heyui-admin/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}