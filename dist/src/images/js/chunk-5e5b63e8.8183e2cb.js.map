{"version":3,"sources":["webpack:///./src/components/management/authorization.vue","webpack:///./src/components/management/authorization.vue?fa2c","webpack:///./src/components/management/authorization.vue?063f"],"names":["class","style","roles","r","key","id","role","changeRole","name","description","color","size","$refs","menu","chooseAll","expandAll","menus","option","menuOption","multiple","choose-mode","ref","user","users","userOption","save","getData","data","datas","keyName","titleName","dataMode","parentName","getTotalDatas","callback","Management","then","resp","ok","body","mounted","this","init","methods","getRoles","length","get","utils","saveLocal","success","trigger","computed","__exports__","render"],"mappings":"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","file":"src/images/js/chunk-5e5b63e8.8183e2cb.js","sourcesContent":["<style lang='less'>\n.authorization-vue {\n  .authorization-frame {\n    display: flex;\n    height: 68vh;\n    border: @border;\n    margin-bottom: 20px;\n    > div {\n      padding: 20px 15px;\n      border-right: @border;\n      flex: 1;\n      overflow: auto;\n      &:last-of-type {\n        border-right: none;\n      }\n      .h-tree-show-desc {\n        font-size: 14px;\n      }\n    }\n    .role-container {\n      padding: 0;\n      .role-item {\n        padding: 5px 10px;\n        border-bottom: @border;\n        &.selected,&:hover {\n          background: @gray4-color;\n          cursor: pointer;\n        }\n        .title {\n          font-size: 16px;\n          font-weight: bold;\n          color: @dark-color;\n        }\n        .desc {\n          color: @dark2-color;\n        }\n      }\n    }\n  }\n}\n</style>\n<template>\n  <div class=\"authorization-vue frame-page h-panel\">\n    <div class=\"h-panel-bar\">\n      <span class=\"h-panel-title\">权限管理</span>\n      <span class=\"dark2-color\">保存示例是存储在Local Storage中，可通过清空 Local Storage 属性 SYS_CONFIG_MENU 重置菜单</span>\n    </div>\n    <div class=\"h-panel-body\">\n      <div class=\"authorization-frame\">\n        <div class=\"role-container\">\n          <div v-for=\"r of roles\" :key=\"r.id\" class=\"role-item\" :class=\"{selected: role == r}\" @click=\"changeRole(r)\">\n            <p class=\"title\">{{r.name}}</p>\n            <p class=\"desc\">{{r.description}}</p>\n          </div>\n        </div>\n        <div class=\"menu-container\">\n          <div style=\"margin-bottom: 10px;\">\n            <Button color=\"primary\" size=\"s\" @click=\"$refs.menu.chooseAll();$refs.menu.expandAll()\">全选</Button>\n            <Button size=\"s\" @click=\"menus = []\" >清空</Button>\n          </div>\n          <Tree :option=\"menuOption\" multiple choose-mode=\"some\" v-model=\"menus\" ref=\"menu\"></Tree>\n        </div>\n        <div class=\"users-container\">\n          <div style=\"margin-bottom: 10px;\">\n            <Button color=\"primary\" size=\"s\" @click=\"$refs.user.chooseAll();$refs.user.expandAll()\">全选</Button>\n            <Button size=\"s\" @click=\"users = []\" >清空</Button>\n          </div>\n          <Tree :option=\"userOption\" multiple ref=\"user\" v-model=\"users\"></Tree>\n        </div>\n      </div>\n      <div class=\"text-center\">\n        <Button color=\"primary\" @click=\"save\">保存</Button>\n        <Button @click=\"getData\">重置</Button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nimport { fullMenus } from '@js/config/menu-config';\nimport G from 'hey-global';\nimport Request from '@common/request';\nimport utils from '@common/utils';\nimport { message } from 'heyui';\n\nexport default {\n  data() {\n    return {\n      role: null,\n      roles: [],\n      menuOption: {\n        datas: fullMenus\n      },\n      userOption: {\n        keyName: 'id',\n        titleName: 'name',\n        dataMode: 'list',\n        parentName: 'parent',\n        getTotalDatas(callback) {\n          Request.Management.users().then(resp => {\n            if (resp.ok) {\n              callback(resp.body);\n            }\n          });\n        }\n      },\n      menus: [],\n      users: []\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      this.$refs.menu.expandAll();\n      this.getRoles();\n    },\n    changeRole(r) {\n      this.role = r;\n      this.getData(r);\n    },\n    getRoles() {\n      Request.Management.roles().then(resp => {\n        if (resp.ok) {\n          this.roles = resp.body;\n          if (this.roles.length) {\n            this.role = this.roles[0];\n            this.getData();\n          }\n        }\n      });\n    },\n    getData() {\n      this.menus = G.get('SYS_MENUS');\n    },\n    save() {\n      // 如果使用权限配置，配合后端获取请求的数据\n      // Request.Account.saveRoleConfig({roleId: this.role.id, menus: this.menus, roles: this.roles}).then(resp => {\n      //   if (resp.ok) {\n      //      message.success('保存成功');\n      //      G.trigger('SYS_MENU_REFRESH');\n      //   }\n      // });\n      utils.saveLocal('SYS_CONFIG_MENU', this.menus);\n      message.success('保存成功');\n      G.trigger('SYS_MENU_REFRESH');\n    }\n  },\n  computed: {\n\n  }\n};\n</script>\n","import { render } from \"./authorization.vue?vue&type=template&id=1469afec\"\nimport script from \"./authorization.vue?vue&type=script&lang=js\"\nexport * from \"./authorization.vue?vue&type=script&lang=js\"\n\nimport \"./authorization.vue?vue&type=style&index=0&id=1469afec&lang=less\"\n\nimport exportComponent from \"/Users/vvpvvp/Documents/develop-me/heyui-admin/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./authorization.vue?vue&type=style&index=0&id=1469afec&lang=less\""],"sourceRoot":""}